---
title: 路线规划与编辑
---

<script>
    import { Pencil, Route, Bike, TriangleAlert, ArrowRightLeft, Home, Repeat, Trash2, CirclePlay, SquareArrowUpLeft } from 'lucide-svelte';
    import DocsNote from '$lib/components/docs/DocsNote.svelte';
    import Routing from '$lib/components/toolbar/tools/routing/Routing.svelte';
    import DocsImage from '$lib/components/docs/DocsImage.svelte';
</script>

# <Pencil size="24" class="inline-block" style="margin-bottom: 5px" /> { title }

该工具允许您通过在地图上放置或移动锚点来创建和编辑路线。

## 设置

如下所示，工具对话框包含一些控制路线行为的设置。
您可以点击 <button><SquareArrowUpLeft size="16" class="inline-block" style="margin-bottom: 2px" /></button> 来最小化该窗口以节省空间。

<div class="flex flex-row justify-center">
    <Routing minimizable={false} class="text-foreground p-3 border rounded-md shadow-lg" />
</div>

### <Route size="16" class="inline-block" style="margin-bottom: 2px" /> 路线

启用路线时， 地图上放置或移动的锚点将通过 <a href="https://www.openstreetmap.org" target="_blank">OpenStreetMap</a> 路网上计算的路线连接。
禁用路线则以直线连接锚点。
也可通过按 <kbd>F5</kbd> 切换此按钮。

### <Bike size="16" class="inline-block" style="margin-bottom: 2px" /> 活动

选择活动类型。

### <TriangleAlert size="16" class="inline-block" style="margin-bottom: 2px" /> 允许私有道路

启用后，规划路线时将考虑私有道路。

<DocsNote type="warning">

仅当您了解该地区的当地情况并有权使用相关道路时才启用此选项。

</DocsNote>

## 绘制和编辑路线

创建路线或扩展现有路线就像在地图上放置新锚点一样简单。

还可以拖动现有锚点，将与之相连的前后两个锚点的路段重新规划。

此外，若要在现有锚点之间插入新锚点，可将鼠标悬停在连接它们的路段上并将出现的锚点拖动到所需位置。
在可触摸设备上，您可以点击该路段来插入新锚点。

<DocsNote>

编辑导入的 GPX 文件时，系统将自动创建一组初始锚点。
为了简化编辑过程，地图缩放的等级越大，锚点显示得就越多。
这使得路线能够按不同的详细程度进行编辑。

</DocsNote>

Finally, you can delete anchor points by clicking on them and selecting <button><Trash2 size="16" class="inline-block" style="margin-bottom: 4px" /> Delete</button> from the context menu.

<DocsImage src="tools/routing" alt="Anchor points allow you to easily edit a route." />

## Additional tools

The following tools automate some common route modification operations.

### <ArrowRightLeft size="16" class="inline-block" style="margin-bottom: 2px" /> Reverse

Reverse the direction of the route.

### <Home size="16" class="inline-block" style="margin-bottom: 2px" /> Back to start

Connect the last point of the route with the starting point, using the chosen routing settings.

### <Repeat size="16" class="inline-block" style="margin-bottom: 2px" /> Round trip

通过相同路线返回起始点.

### <CirclePlay size="16" class="inline-block" style="margin-bottom: 2px" /> Change the start of the loop

When the end point of the route is close enough to the start, you can change the start of the loop by clicking on any anchor point and selecting <button><CirclePlay size="16" class="inline-block" style="margin-bottom: 2px" /> Start loop here</button> from the context menu.
